{"openapi":"3.1.0","info":{"title":"Superstreamer API","description":"The Superstreamer API is organized around REST, returns JSON-encoded responses and uses standard HTTP response codes and verbs.","version":"1.0.0"},"tags":[{"name":"Jobs","description":"Handle tasks related to jobs, including video processing and job status monitoring."},{"name":"Assets","description":"Inspect assets."},{"name":"Storage","description":"Anything related to your configured S3 bucket."},{"name":"User","description":"Methods related to user actions, including authentication and personal settings updates."}],"components":{"securitySchemes":{"userToken":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"User":{"type":"object","properties":{"id":{"type":"number"},"username":{"type":"string"}},"required":["id","username"]},"StorageItem":{"oneOf":[{"type":"object","properties":{"type":{"type":"string","const":"file"},"path":{"type":"string"},"size":{"type":"number"}},"required":["type","path","size"]},{"type":"object","properties":{"type":{"type":"string","const":"folder"},"path":{"type":"string"}},"required":["type","path"]}],"description":"An item in your S3 storage."},"StorageFile":{"oneOf":[{"type":"object","properties":{"mode":{"type":"string","const":"url"},"type":{"type":"string","enum":["video","audio"]},"url":{"type":"string"}},"required":["mode","type","url"]},{"type":"object","properties":{"mode":{"type":"string","const":"payload"},"payload":{"type":"string"}},"required":["mode","payload"]}],"description":"A single file in your S3 storage."},"Job":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"state":{"type":"string","enum":["waiting","running","failed","completed"]},"progress":{"type":"object","additionalProperties":{"type":"number"}},"createdAt":{"type":"number"},"processedAt":{"type":"number"},"finishedAt":{"type":"number"},"duration":{"type":"number"},"inputData":{"type":"string"},"outputData":{"type":"string"},"failedReason":{"type":"string"},"stacktrace":{"type":"array","items":{"type":"string"}},"children":{"type":"array","items":{"$ref":"Job"}}},"required":["id","name","state","createdAt","inputData","children"],"description":"A single job."},"Asset":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":["string","null"]},"groupId":{"type":["number","null"]},"createdAt":{"type":"string"},"playables":{"type":"number"}},"required":["id","name","groupId","createdAt","playables"],"description":"Each transcode result will be registered as an asset."},"Group":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"}},"required":["id","name"],"description":"Each asset can be part of a group for clarity."}}},"paths":{"/token":{"post":{"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string"}},"required":["token"]}}}}},"operationId":"postToken","summary":"Create a token","description":"Create an auth token for given credentials","tags":["User"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}},"required":["username","password"]}}}}}},"/user":{"get":{"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"operationId":"getUser","summary":"Get authenticated user","description":"Get the current user","security":[{"userToken":[]}],"tags":["User"]}},"/storage/items":{"get":{"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"type":"object","properties":{"cursor":{"type":"string"},"items":{"type":"array","items":{"$ref":"#/components/schemas/StorageItem"}}},"required":["items"]}}}}},"operationId":"getStorageItems","summary":"Get items from storage","description":"Get items for a path from your S3 storage with all files and subfolders.","security":[{"userToken":[]}],"tags":["Storage"],"parameters":[{"in":"query","name":"path","schema":{"type":"string"},"required":true},{"in":"query","name":"take","schema":{"type":"number","default":10},"required":false},{"in":"query","name":"cursor","schema":{"type":"string"},"required":false}]}},"/storage/file":{"get":{"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StorageFile"}}}}},"operationId":"getStorageFile","summary":"Get a file","description":"Get a file from your S3 storage by path.","security":[{"userToken":[]}],"tags":["Storage"],"parameters":[{"in":"query","name":"path","schema":{"type":"string"},"required":true}]}},"/jobs/pipeline":{"post":{"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"type":"object","properties":{"jobId":{"type":"string"}},"required":["jobId"]}}}}},"operationId":"postJobsPipeline","summary":"Create pipeline job","security":[{"userToken":[]}],"tags":["Jobs"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"assetId":{"type":"string","format":"uuid","default":"805c1846-d6c7-4399-af75-61a23e3addad"},"inputs":{"type":"array","items":{"oneOf":[{"type":"object","properties":{"type":{"type":"string","const":"video"},"path":{"type":"string"},"height":{"type":"number"}},"required":["type","path"]},{"type":"object","properties":{"type":{"type":"string","const":"audio"},"path":{"type":"string"},"language":{"type":"string"},"channels":{"type":"number"}},"required":["type","path"]},{"type":"object","properties":{"type":{"type":"string","const":"text"},"path":{"type":"string"},"language":{"type":"string"}},"required":["type","path","language"]}]}},"streams":{"type":"array","items":{"oneOf":[{"type":"object","properties":{"type":{"type":"string","const":"video"},"codec":{"type":"string","enum":["h264","vp9","hevc"]},"height":{"type":"number"},"bitrate":{"type":"number"},"framerate":{"type":"number"}},"required":["type","codec","height"]},{"type":"object","properties":{"type":{"type":"string","const":"audio"},"codec":{"type":"string","enum":["aac","ac3","eac3"]},"bitrate":{"type":"number"},"language":{"type":"string"},"channels":{"type":"number"}},"required":["type","codec"]},{"type":"object","properties":{"type":{"type":"string","const":"text"},"language":{"type":"string"}},"required":["type","language"]}]}},"group":{"type":"string"},"language":{"type":"string"},"concurrency":{"type":"number","default":5},"public":{"type":"boolean","default":true}},"required":["inputs","streams"]}}}}}},"/jobs/transcode":{"post":{"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"type":"object","properties":{"jobId":{"type":"string"}},"required":["jobId"]}}}}},"operationId":"postJobsTranscode","summary":"Create transcode job","security":[{"userToken":[]}],"tags":["Jobs"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"assetId":{"type":"string","format":"uuid","default":"58675f65-1e4a-43eb-b85e-95d1ed013d59"},"segmentSize":{"type":"number","default":2.24},"inputs":{"type":"array","items":{"oneOf":[{"type":"object","properties":{"type":{"type":"string","const":"video"},"path":{"type":"string"},"height":{"type":"number"}},"required":["type","path"]},{"type":"object","properties":{"type":{"type":"string","const":"audio"},"path":{"type":"string"},"language":{"type":"string"},"channels":{"type":"number"}},"required":["type","path"]},{"type":"object","properties":{"type":{"type":"string","const":"text"},"path":{"type":"string"},"language":{"type":"string"}},"required":["type","path","language"]}]}},"streams":{"type":"array","items":{"oneOf":[{"type":"object","properties":{"type":{"type":"string","const":"video"},"codec":{"type":"string","enum":["h264","vp9","hevc"]},"height":{"type":"number"},"bitrate":{"type":"number"},"framerate":{"type":"number"}},"required":["type","codec","height"]},{"type":"object","properties":{"type":{"type":"string","const":"audio"},"codec":{"type":"string","enum":["aac","ac3","eac3"]},"bitrate":{"type":"number"},"language":{"type":"string"},"channels":{"type":"number"}},"required":["type","codec"]},{"type":"object","properties":{"type":{"type":"string","const":"text"},"language":{"type":"string"}},"required":["type","language"]}]}},"group":{"type":"string"}},"required":["inputs","streams"]}}}}}},"/jobs/package":{"post":{"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"type":"object","properties":{"jobId":{"type":"string"}},"required":["jobId"]}}}}},"operationId":"postJobsPackage","summary":"Create package job","security":[{"userToken":[]}],"tags":["Jobs"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"assetId":{"type":"string","format":"uuid","default":"a8f8e270-370b-42bc-b35a-5dfc5991793a"},"segmentSize":{"type":"number","default":2.24},"name":{"type":"string","default":"hls"},"language":{"type":"string"},"concurrency":{"type":"number","default":5},"public":{"type":"boolean","default":true}}}}}}}},"/jobs":{"get":{"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"type":"object","properties":{"filter":{"type":"object","properties":{"page":{"type":"number"},"perPage":{"type":"number"},"sortKey":{"type":"string","enum":["name","duration","createdAt"]},"sortDir":{"type":"string","enum":["asc","desc"]}},"required":["page","perPage","sortKey","sortDir"]},"items":{"type":"array","items":{"$ref":"#/components/schemas/Job"}},"totalPages":{"type":"number"}},"required":["filter","items","totalPages"]}}}}},"operationId":"getJobs","summary":"Get all jobs","security":[{"userToken":[]}],"tags":["Jobs"],"parameters":[{"in":"query","name":"page","schema":{"type":"number","default":1}},{"in":"query","name":"perPage","schema":{"type":"number","default":20}},{"in":"query","name":"sortKey","schema":{"type":"string","enum":["name","duration","createdAt"],"default":"createdAt"}},{"in":"query","name":"sortDir","schema":{"type":"string","enum":["asc","desc"],"default":"desc"}}]}},"/jobs/{id}":{"get":{"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Job"}}}}},"operationId":"getJobsById","summary":"Get a job","security":[{"userToken":[]}],"tags":["Jobs"],"parameters":[{"in":"query","name":"fromRoot","schema":{"type":"boolean","default":false}},{"schema":{"type":"string"},"in":"path","name":"id","required":true}]}},"/jobs/{id}/logs":{"get":{"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}}},"operationId":"getJobsByIdLogs","summary":"Get job logs","security":[{"userToken":[]}],"tags":["Jobs"],"parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true}]}},"/assets":{"get":{"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"type":"object","properties":{"filter":{"type":"object","properties":{"page":{"type":"number"},"perPage":{"type":"number"},"sortKey":{"type":"string","enum":["name","playables","groupId","createdAt"]},"sortDir":{"type":"string","enum":["asc","desc"]}},"required":["page","perPage","sortKey","sortDir"]},"items":{"type":"array","items":{"$ref":"#/components/schemas/Asset"}},"totalPages":{"type":"number"}},"required":["filter","items","totalPages"]}}}}},"operationId":"getAssets","summary":"Get all assets","security":[{"userToken":[]}],"tags":["Assets"],"parameters":[{"in":"query","name":"page","schema":{"type":"number","default":1}},{"in":"query","name":"perPage","schema":{"type":"number","default":20}},{"in":"query","name":"sortKey","schema":{"type":"string","enum":["name","playables","groupId","createdAt"],"default":"createdAt"}},{"in":"query","name":"sortDir","schema":{"type":"string","enum":["asc","desc"],"default":"desc"}}]}},"/assets/groups":{"get":{"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Group"}}}}}},"operationId":"getAssetsGroups","summary":"Get all asset groups","security":[{"userToken":[]}],"tags":["Assets"]}},"/assets/{id}":{"get":{"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Asset"}}}}},"operationId":"getAssetsById","summary":"Get an asset","security":[{"userToken":[]}],"tags":["Assets"],"parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true}]},"put":{"responses":{"200":{"description":"Successful response"}},"operationId":"putAssetsById","summary":"Update an asset","security":[{"userToken":[]}],"tags":["Assets"],"parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"}},"required":["name"]}}}}}}}}